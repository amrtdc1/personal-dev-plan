<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Quotable API Test</title>
  <style>
    body {
      font-family: system-ui, -apple-system, sans-serif;
      max-width: 800px;
      margin: 2rem auto;
      padding: 0 1rem;
      background: #f5f5f5;
    }
    
    .container {
      background: white;
      padding: 2rem;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    
    h1 {
      color: #333;
      margin-top: 0;
    }
    
    button {
      background: #2563eb;
      color: white;
      border: none;
      padding: 0.75rem 1.5rem;
      border-radius: 6px;
      cursor: pointer;
      font-size: 1rem;
      margin: 0.5rem 0.5rem 0.5rem 0;
    }
    
    button:hover {
      background: #1d4ed8;
    }
    
    button:active {
      transform: scale(0.98);
    }
    
    .output {
      background: #f8f9fa;
      border: 1px solid #dee2e6;
      border-radius: 4px;
      padding: 1rem;
      margin-top: 1rem;
      white-space: pre-wrap;
      font-family: 'Courier New', monospace;
      font-size: 0.9rem;
      max-height: 400px;
      overflow-y: auto;
    }
    
    .quote-display {
      background: #e7f3ff;
      border-left: 4px solid #2563eb;
      padding: 1rem;
      margin-top: 1rem;
      font-style: italic;
    }
    
    .author {
      margin-top: 0.5rem;
      font-style: normal;
      font-weight: 600;
      color: #666;
    }
    
    .loading {
      color: #666;
      font-style: italic;
    }
    
    .error {
      color: #dc2626;
      background: #fee;
      border-left: 4px solid #dc2626;
    }
    
    .section {
      margin-top: 2rem;
      padding-top: 2rem;
      border-top: 1px solid #e5e7eb;
    }
    
    code {
      background: #f1f5f9;
      padding: 0.2rem 0.4rem;
      border-radius: 3px;
      font-family: 'Courier New', monospace;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>ğŸ”Œ Quotable API Test</h1>
    <p>Test different ways to call the Quotable API using pure JavaScript.</p>
    
    <!-- Test 1: Single Random Quote -->
    <div class="section">
      <h2>1. Get Single Random Quote</h2>
      <p>Endpoint: <code>https://api.quotable.io/random</code></p>
      <button onclick="testSingleQuote()">Fetch Single Quote</button>
      <div id="singleQuoteOutput" class="output">Click the button to fetch a quote...</div>
      <div id="singleQuoteDisplay"></div>
    </div>
    
    <!-- Test 2: Multiple Random Quotes -->
    <div class="section">
      <h2>2. Get Multiple Random Quotes</h2>
      <p>Endpoint: <code>https://api.quotable.io/quotes/random?limit=5</code></p>
      <button onclick="testMultipleQuotes()">Fetch 5 Quotes</button>
      <div id="multipleQuotesOutput" class="output">Click the button to fetch quotes...</div>
      <div id="multipleQuotesDisplay"></div>
    </div>
    
    <!-- Test 3: With Error Handling -->
    <div class="section">
      <h2>3. Fetch with Error Handling</h2>
      <p>Best practice example with comprehensive error handling</p>
      <button onclick="testWithErrorHandling()">Fetch with Error Handling</button>
      <div id="errorHandlingOutput" class="output">Click the button to fetch a quote...</div>
    </div>
    
    <!-- Test 4: With Async/Await -->
    <div class="section">
      <h2>4. Using Async/Await (Modern Approach)</h2>
      <p>Cleaner syntax using async/await instead of .then() chains</p>
      <button onclick="testAsyncAwait()">Fetch with Async/Await</button>
      <div id="asyncAwaitOutput" class="output">Click the button to fetch a quote...</div>
    </div>
    
    <!-- Test 5: Filter by Tags -->
    <div class="section">
      <h2>5. Filter Quotes by Tags</h2>
      <p>Get quotes with specific themes</p>
      <button onclick="testFilterByTag('inspirational')">Inspirational</button>
      <button onclick="testFilterByTag('wisdom')">Wisdom</button>
      <button onclick="testFilterByTag('success')">Success</button>
      <button onclick="testFilterByTag('technology')">Technology</button>
      <div id="tagFilterOutput" class="output">Click a button to fetch a themed quote...</div>
    </div>
  </div>

  <script>
    // =======================
    // TEST 1: Single Random Quote (Basic)
    // =======================
    function testSingleQuote() {
      const outputEl = document.getElementById('singleQuoteOutput');
      const displayEl = document.getElementById('singleQuoteDisplay');
      
      outputEl.textContent = 'Loading...';
      outputEl.className = 'output loading';
      displayEl.innerHTML = '';
      
      // Basic fetch call
      fetch('https://api.quotable.io/random')
        .then(response => {
          outputEl.textContent = `Response Status: ${response.status} ${response.statusText}\n\n`;
          outputEl.textContent += 'Converting to JSON...';
          return response.json();
        })
        .then(data => {
          // Display the raw JSON
          outputEl.textContent = 'Raw API Response:\n\n' + JSON.stringify(data, null, 2);
          outputEl.className = 'output';
          
          // Display the quote nicely
          displayEl.innerHTML = `
            <div class="quote-display">
              "${data.content}"
              <div class="author">â€” ${data.author}</div>
            </div>
          `;
        })
        .catch(error => {
          outputEl.textContent = 'Error: ' + error.message;
          outputEl.className = 'output error';
        });
    }
    
    // =======================
    // TEST 2: Multiple Random Quotes
    // =======================
    function testMultipleQuotes() {
      const outputEl = document.getElementById('multipleQuotesOutput');
      const displayEl = document.getElementById('multipleQuotesDisplay');
      
      outputEl.textContent = 'Loading...';
      outputEl.className = 'output loading';
      displayEl.innerHTML = '';
      
      // Fetch multiple quotes using query parameter
      fetch('https://api.quotable.io/quotes/random?limit=5')
        .then(response => response.json())
        .then(data => {
          // data is an array of quotes
          outputEl.textContent = `Received ${data.length} quotes:\n\n` + JSON.stringify(data, null, 2);
          outputEl.className = 'output';
          
          // Display all quotes
          let html = '';
          data.forEach((quote, index) => {
            html += `
              <div class="quote-display">
                <strong>Quote ${index + 1}:</strong><br>
                "${quote.content}"
                <div class="author">â€” ${quote.author}</div>
              </div>
            `;
          });
          displayEl.innerHTML = html;
        })
        .catch(error => {
          outputEl.textContent = 'Error: ' + error.message;
          outputEl.className = 'output error';
        });
    }
    
    // =======================
    // TEST 3: With Comprehensive Error Handling
    // =======================
    function testWithErrorHandling() {
      const outputEl = document.getElementById('errorHandlingOutput');
      
      outputEl.textContent = 'Loading...';
      outputEl.className = 'output loading';
      
      fetch('https://api.quotable.io/random')
        .then(response => {
          // Check if the request was successful
          if (!response.ok) {
            throw new Error(`HTTP error! Status: ${response.status}`);
          }
          return response.json();
        })
        .then(data => {
          // Validate the data structure
          if (!data.content || !data.author) {
            throw new Error('Invalid data structure received from API');
          }
          
          outputEl.textContent = 'âœ… Success!\n\n';
          outputEl.textContent += `Quote: "${data.content}"\n`;
          outputEl.textContent += `Author: ${data.author}\n`;
          outputEl.textContent += `Tags: ${data.tags.join(', ')}\n`;
          outputEl.textContent += `Length: ${data.length} characters\n\n`;
          outputEl.textContent += 'Full Response:\n' + JSON.stringify(data, null, 2);
          outputEl.className = 'output';
        })
        .catch(error => {
          outputEl.textContent = 'âŒ Error Details:\n\n';
          outputEl.textContent += `Type: ${error.name}\n`;
          outputEl.textContent += `Message: ${error.message}\n`;
          outputEl.textContent += `Stack: ${error.stack}`;
          outputEl.className = 'output error';
        });
    }
    
    // =======================
    // TEST 4: Async/Await (Modern Approach)
    // =======================
    async function testAsyncAwait() {
      const outputEl = document.getElementById('asyncAwaitOutput');
      
      try {
        outputEl.textContent = 'Loading...';
        outputEl.className = 'output loading';
        
        // Using async/await for cleaner code
        const response = await fetch('https://api.quotable.io/random');
        
        if (!response.ok) {
          throw new Error(`HTTP error! Status: ${response.status}`);
        }
        
        const data = await response.json();
        
        outputEl.textContent = 'âœ… Fetched using async/await!\n\n';
        outputEl.textContent += `This is the modern, cleaner way to handle promises.\n\n`;
        outputEl.textContent += `Quote: "${data.content}"\n`;
        outputEl.textContent += `Author: ${data.author}\n\n`;
        outputEl.textContent += 'Full Response:\n' + JSON.stringify(data, null, 2);
        outputEl.className = 'output';
        
      } catch (error) {
        outputEl.textContent = 'âŒ Error: ' + error.message;
        outputEl.className = 'output error';
      }
    }
    
    // =======================
    // TEST 5: Filter by Tags
    // =======================
    async function testFilterByTag(tag) {
      const outputEl = document.getElementById('tagFilterOutput');
      
      try {
        outputEl.textContent = `Loading ${tag} quote...`;
        outputEl.className = 'output loading';
        
        // Add tags parameter to the URL
        const url = `https://api.quotable.io/random?tags=${tag}`;
        const response = await fetch(url);
        
        if (!response.ok) {
          throw new Error(`HTTP error! Status: ${response.status}`);
        }
        
        const data = await response.json();
        
        outputEl.textContent = `âœ… Found a "${tag}" quote!\n\n`;
        outputEl.textContent += `URL used: ${url}\n\n`;
        outputEl.textContent += `Quote: "${data.content}"\n`;
        outputEl.textContent += `Author: ${data.author}\n`;
        outputEl.textContent += `Tags: ${data.tags.join(', ')}\n\n`;
        outputEl.textContent += 'Full Response:\n' + JSON.stringify(data, null, 2);
        outputEl.className = 'output';
        
      } catch (error) {
        outputEl.textContent = `âŒ Error fetching "${tag}" quote:\n` + error.message;
        outputEl.className = 'output error';
      }
    }
    
    // =======================
    // BONUS: Code Examples
    // =======================
    console.log(`
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘  ğŸ“š QUOTABLE API - CODE EXAMPLES                           â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1ï¸âƒ£  BASIC FETCH (Promise-based):
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
fetch('https://api.quotable.io/random')
  .then(response => response.json())
  .then(data => {
    console.log(data.content);  // The quote text
    console.log(data.author);   // The author
  })
  .catch(error => console.error('Error:', error));


2ï¸âƒ£  ASYNC/AWAIT (Modern):
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
async function getQuote() {
  try {
    const response = await fetch('https://api.quotable.io/random');
    const data = await response.json();
    return { quote: data.content, author: data.author };
  } catch (error) {
    console.error('Error:', error);
  }
}


3ï¸âƒ£  WITH ERROR HANDLING:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
async function getQuoteSafe() {
  try {
    const response = await fetch('https://api.quotable.io/random');
    
    if (!response.ok) {
      throw new Error(\`HTTP \${response.status}\`);
    }
    
    const data = await response.json();
    return data;
  } catch (error) {
    console.error('Failed to fetch:', error);
    return null;
  }
}


4ï¸âƒ£  GET MULTIPLE QUOTES:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
fetch('https://api.quotable.io/quotes/random?limit=5')
  .then(response => response.json())
  .then(quotes => {
    quotes.forEach(q => console.log(q.content));
  });


5ï¸âƒ£  FILTER BY TAG:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
fetch('https://api.quotable.io/random?tags=wisdom')
  .then(response => response.json())
  .then(data => console.log(data.content));


ğŸ“ API Response Structure:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
{
  "_id": "unique-id",
  "content": "The quote text",
  "author": "Author Name",
  "tags": ["tag1", "tag2"],
  "authorSlug": "author-name",
  "length": 42,
  "dateAdded": "2021-01-01",
  "dateModified": "2021-01-01"
}
    `);
  </script>
</body>
</html>
